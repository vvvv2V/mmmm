(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{35468:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return CheckoutPage}});var t=s(97421),l=s(90835),n=s(67294),o=s(43988),c=s(85893),r=s(34155),Payments_CheckoutForm=function({amount:e=120}){let[a,s]=(0,n.useState)("pix"),[t,l]=(0,n.useState)(!1),{addToast:d}=(0,o.p)(),handlePay=async()=>{l(!0);try{let s=r.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",t=await fetch(`${s}/api/payments/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({amount:e,method:a}),credentials:"include"});if(!t.ok)throw Error("Erro no pagamento");let l=await t.json();d("Pagamento realizado (mock). ID: "+(l.id||"MOCK"),"success")}catch(e){d("Pagamento simulado com sucesso (fallback).","info")}finally{l(!1)}};return(0,c.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[(0,c.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Pagamento"}),(0,c.jsxs)("p",{className:"mb-4",children:["Valor: ",(0,c.jsxs)("strong",{children:["R$ ",e.toFixed(2)]})]}),(0,c.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,c.jsxs)("label",{className:`block p-3 border rounded ${"pix"===a?"border-blue-500 bg-blue-50":""}`,children:[(0,c.jsx)("input",{type:"radio",name:"method",checked:"pix"===a,onChange:()=>s("pix")})," ",(0,c.jsx)("span",{className:"ml-2 font-semibold",children:"PIX (QR)"})]}),(0,c.jsxs)("label",{className:`block p-3 border rounded ${"card"===a?"border-blue-500 bg-blue-50":""}`,children:[(0,c.jsx)("input",{type:"radio",name:"method",checked:"card"===a,onChange:()=>s("card")})," ",(0,c.jsx)("span",{className:"ml-2 font-semibold",children:"Cart\xe3o de Cr\xe9dito"})]}),(0,c.jsxs)("label",{className:`block p-3 border rounded ${"boleto"===a?"border-blue-500 bg-blue-50":""}`,children:[(0,c.jsx)("input",{type:"radio",name:"method",checked:"boleto"===a,onChange:()=>s("boleto")})," ",(0,c.jsx)("span",{className:"ml-2 font-semibold",children:"Boleto"})]})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("button",{onClick:handlePay,disabled:t,className:"px-4 py-2 bg-green-600 text-white rounded",children:t?"Processando...":"Pagar"}),(0,c.jsx)("button",{onClick:()=>d("Pagamento cancelado","info"),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancelar"})]})]})},Loyalty_LoyaltyPanel=function(){let[e,a]=(0,n.useState)(0);(0,n.useEffect)(()=>{let e=parseInt(localStorage.getItem("loyalty_points")||"0",10);a(e)},[]);let earn=s=>{let t=e+s;localStorage.setItem("loyalty_points",t),a(t)},redeem=s=>{if(e<s)return alert("Pontos insuficientes");let t=e-s;localStorage.setItem("loyalty_points",t),a(t),alert("Cupom aplicado: R$ "+(s/10).toFixed(2))};return(0,c.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[(0,c.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Programa de Fidelidade"}),(0,c.jsxs)("p",{className:"mb-2",children:["Pontos acumulados: ",(0,c.jsx)("strong",{children:e})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("button",{onClick:()=>earn(10),className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Ganhar 10 pts"}),(0,c.jsx)("button",{onClick:()=>redeem(50),className:"px-3 py-2 bg-green-600 text-white rounded",children:"Resgatar 50 pts"})]}),(0,c.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"1 ponto = R$0.10 (exemplo)"})]})},d=s(5152),i=s.n(d);let m=i()(()=>s.e(139).then(s.bind(s,80139)),{ssr:!1});function CheckoutPage(){return(0,c.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,c.jsx)(t.Z,{}),(0,c.jsxs)("main",{className:"flex-grow max-w-3xl mx-auto p-6 space-y-6",children:[(0,c.jsx)("h1",{className:"text-2xl font-bold",children:"Checkout"}),(0,c.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,c.jsx)("div",{className:"card",children:(0,c.jsx)(Payments_CheckoutForm,{})}),(0,c.jsx)("div",{className:"card",children:(0,c.jsx)(Loyalty_LoyaltyPanel,{})})]}),(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)(m,{})})]}),(0,c.jsx)(l.Z,{})]})}},95338:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return s(35468)}])}},function(e){e.O(0,[216,857,774,336,888,179],function(){return e(e.s=95338)}),_N_E=e.O()}]);